<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ranking ON</title>
<style>
  /* Reset y estilos base */
  * { margin:0; padding:0; box-sizing:border-box; font-family: Arial, sans-serif; }
  body { background: url('fondoranking.png') no-repeat center center fixed; background-size: cover; color: #fff; }
  #ranking-container {
    position: absolute;
    top: 188.85px;
    left: 305.93px;
    width: 1486px;
    height: 769px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 10px;
    overflow-y: auto;
    background: rgba(0,0,0,0.0); /* transparente para ver fondo */
  }
  .renglon {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px;
    background: rgba(0,0,0,0.3);
    border-radius: 8px;
    margin-bottom: 10px;
    min-height: 60px;
  }
  .renglon:first-child {
    background: rgba(255,0,0,0.6); /* Destacar N°1 */
  }
  .info {
    display: flex;
    align-items: center;
    gap: 15px;
  }
  .numero {
    font-weight: bold;
    font-size: 28px;
  }
  .numero:first-child {
    font-size: 40px;
  }
  .play-btn {
    width: 28px;
    height: 28px;
    border: 2px solid #fff;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
  }
  .play-btn:after {
    content: '';
    display: block;
    width: 0;
    height: 0;
    border-left: 10px solid #fff;
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
  }
  .texto {
    display: flex;
    flex-direction: column;
  }
  .titulo {
    font-weight: bold;
  }
  .artista {
    font-weight: normal;
  }
  .indicador {
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-bottom: 12px solid yellow; /* default estable */
    margin-right: 10px;
  }
  .subio { border-bottom-color: lime; }
  .bajo { border-bottom-color: red; }
  .votar-btn {
    background-color: #fff;
    color: #000;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
  }
</style>
</head>
<body>
<div id="ranking-container"></div>

<script>
const temas = {
  "tipica": {"nombre":"Típica Argentina","artista":"Nico Valdi x Chofer x El Lobo","audio":"tipica.mp3"},
  "papi": {"nombre":"Music Sessions","artista":"Daddy Yankee - BZRP","audio":"papi.mp3"},
  "lavilla": {"nombre":"La Villa","artista":"Ryan Castro, Kapo, Gangsta","audio":"lavilla.mp3"},
  "hacecalor": {"nombre":"Hace Calor","artista":"María Becerra, El Alfa, Xross","audio":"hacecalor.mp3"},
  "ladron": {"nombre":"Ladrón","artista":"Luck Ra y Karina","audio":"chorro.mp3"},
  "paisaje": {"nombre":"Paisaje","artista":"Ke Personajes y Karina","audio":"paisaje.mp3"},
  "perla": {"nombre":"La Perla","artista":"Rosalía","audio":"laperla.mp3"},
  "taylor": {"nombre":"The Fate of Ophelia","artista":"Taylor Swift","audio":"taylor.mp3"},
  "lumar": {"nombre":"Una y Otra Vez","artista":"Marcela Morelo y Luciano Pereyra","audio":"lumar.mp3"},
  "tujardin": {"nombre":"Tu Jardín con Enanitos","artista":"Roze Oficial","audio":"tujardin.mp3"}
};

// Guardar votos por día
let votosDia = JSON.parse(localStorage.getItem('votosDia') || '{}');
const hoy = new Date().toISOString().split('T')[0];

function renderRanking() {
  const container = document.getElementById('ranking-container');
  container.innerHTML = '';

  // Convertir objeto en array y ordenar por votos
  const lista = Object.keys(temas).map(key => {
    let votos = parseInt(localStorage.getItem(votos_${key}) || 0);
    return {...temas[key], key, votos};
  }).sort((a,b) => b.votos - a.votos);

  lista.forEach((tema, idx) => {
    const renglon = document.createElement('div');
    renglon.className = 'renglon';

    // Número y Play
    const info = document.createElement('div');
    info.className = 'info';

    const numero = document.createElement('div');
    numero.className = 'numero';
    if(idx===0) numero.style.fontSize='40px';
    numero.textContent = idx+1;

    const play = document.createElement('div');
    play.className = 'play-btn';
    play.onclick = () => {
      const audio = new Audio(tema.audio);
      audio.play();
    };

    info.appendChild(numero);
    info.appendChild(play);

    // Texto tema/artista
    const texto = document.createElement('div');
    texto.className = 'texto';
    const tNombre = document.createElement('div');
    tNombre.className = 'titulo';
    tNombre.textContent = tema.nombre;
    const tArtista = document.createElement('div');
    tArtista.className = 'artista';
    tArtista.textContent = tema.artista;
    texto.appendChild(tNombre);
    texto.appendChild(tArtista);

    info.appendChild(texto);

    // Indicador
    const indicador = document.createElement('div');
    indicador.className = 'indicador';
    if(tema.votos>votosDia[tema.key]) indicador.classList.add('subio');
    else if(tema.votos<votosDia[tema.key]) indicador.classList.add('bajo');

    // Botón votar
    const votar = document.createElement('div');
    votar.className = 'votar-btn';
    if(votosDia[tema.key]===hoy) {
      votar.textContent='Ya votaste';
      votar.style.background='#ccc';
      votar.style.cursor='not-allowed';
    } else {
      votar.textContent='Votar';
      votar.onclick = () => {
        tema.votos++;
        localStorage.setItem(votos_${tema.key}, tema.votos);
        votosDia[tema.key] = hoy;
        localStorage.setItem('votosDia', JSON.stringify(votosDia));
        renderRanking();
      };
    }

    renglon.appendChild(info);
    renglon.appendChild(indicador);
    renglon.appendChild(votar);
    container.appendChild(renglon);
  });
}

renderRanking();
</script>
</body>
</html>
